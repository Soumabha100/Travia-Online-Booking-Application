<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Travia Command Center</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../styles/admin.css" />
  </head>
  <body>
    <div class="d-flex">
      <div class="sidebar d-none d-md-block" id="sidebar">
        <div class="p-4 mb-3 border-bottom border-secondary">
          <h5 class="text-white fw-bold m-0">
            <i class="bi bi-globe-americas text-primary"></i> TRAVIA
            <span class="text-xs text-secondary">Admin</span>
          </h5>
        </div>
        <nav class="d-flex flex-column gap-1">
          <a href="#" class="sidebar-link active" id="menu-dashboard"
            ><i class="bi bi-grid-1x2-fill"></i> Dashboard</a
          >
          <a href="#" class="sidebar-link" id="menu-countries"
            ><i class="bi bi-flag"></i> Countries & Policies</a
          >
          <a href="#" class="sidebar-link" id="menu-cities"
            ><i class="bi bi-buildings"></i> Cities & Economics</a
          >
          <a href="#" class="sidebar-link" id="menu-tours"
            ><i class="bi bi-airplane"></i> Tours & Inventory</a
          >
          <a href="#" class="sidebar-link" id="menu-users"
            ><i class="bi bi-people"></i> User Management</a
          >
        </nav>
        <div class="mt-auto p-4">
          <a
            href="../pages/index.html"
            class="btn btn-outline-danger w-100 btn-sm"
            ><i class="bi bi-box-arrow-right"></i> Logout</a
          >
        </div>
      </div>

      <div class="flex-grow-1">
        <nav
          class="navbar navbar-expand bg-white border-bottom px-4 py-3 sticky-top"
        >
          <button
            class="btn btn-link text-dark d-md-none me-2"
            id="toggle-sidebar"
          >
            <i class="bi bi-list fs-4"></i>
          </button>
          <h5 class="mb-0 fw-semibold" id="page-title">
            Market Intelligence Dashboard
          </h5>
          <div class="ms-auto d-flex align-items-center gap-3">
            <span class="badge bg-light text-dark border"
              ><i class="bi bi-circle-fill text-success small me-1"></i> System
              Online</span
            >
          </div>
        </nav>

        <div class="container-fluid p-4">
          <div class="toast-container position-fixed bottom-0 end-0 p-3">
            <div
              id="liveToast"
              class="toast align-items-center text-white bg-primary border-0"
              role="alert"
              aria-live="assertive"
              aria-atomic="true"
            >
              <div class="d-flex">
                <div class="toast-body" id="toast-msg">Action Successful</div>
                <button
                  type="button"
                  class="btn-close btn-close-white me-2 m-auto"
                  data-bs-dismiss="toast"
                ></button>
              </div>
            </div>
          </div>

          <div id="view-dashboard" class="admin-view">
            <div class="row g-4 mb-4">
              <div class="col-xl-3 col-md-6">
                <div class="stats-card p-4">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p class="text-muted small mb-1">Total Tours</p>
                      <h3 class="fw-bold mb-0" id="stat-tours">0</h3>
                    </div>
                    <div
                      class="bg-primary bg-opacity-10 p-3 rounded text-primary"
                    >
                      <i class="bi bi-box-seam fs-4"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="stats-card p-4">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p class="text-muted small mb-1">Total Countries</p>
                      <h3 class="fw-bold mb-0" id="stat-countries">0</h3>
                    </div>
                    <div
                      class="bg-success bg-opacity-10 p-3 rounded text-success"
                    >
                      <i class="bi bi-geo-alt fs-4"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="stats-card p-4">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p class="text-muted small mb-1">Total Cities</p>
                      <h3 class="fw-bold mb-0" id="stat-cities">0</h3>
                    </div>
                    <div
                      class="bg-warning bg-opacity-10 p-3 rounded text-warning"
                    >
                      <i class="bi bi-building fs-4"></i>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-xl-3 col-md-6">
                <div class="stats-card p-4">
                  <div class="d-flex justify-content-between">
                    <div>
                      <p class="text-muted small mb-1">Total Bookings</p>
                      <h3 class="fw-bold mb-0" id="stat-bookings">0</h3>
                    </div>
                    <div class="bg-info bg-opacity-10 p-3 rounded text-info">
                      <i class="bi bi-receipt fs-4"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="view-countries" class="admin-view d-none">
            <div class="card border-0 shadow-sm">
              <div
                class="card-header bg-white py-3 d-flex justify-content-between align-items-center"
              >
                <h6 class="mb-0 fw-bold">Global Markets</h6>
                <button
                  class="btn btn-primary btn-sm"
                  onclick="openModal('country')"
                >
                  <i class="bi bi-plus-lg"></i> Add Market
                </button>
              </div>
              <div class="table-responsive">
                <table
                  class="table table-custom align-middle mb-0"
                  id="table-countries"
                >
                  <thead>
                    <tr>
                      <th>Country</th>
                      <th>Access Policy</th>
                      <th>Currency</th>
                      <th>Market Yield</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="view-cities" class="admin-view d-none">
            <div class="card border-0 shadow-sm">
              <div
                class="card-header bg-white py-3 d-flex justify-content-between align-items-center"
              >
                <h6 class="mb-0 fw-bold">Urban Economics</h6>
                <button
                  class="btn btn-primary btn-sm"
                  onclick="openModal('city')"
                >
                  <i class="bi bi-plus-lg"></i> Add City
                </button>
              </div>
              <div class="table-responsive">
                <table
                  class="table table-custom align-middle mb-0"
                  id="table-cities"
                >
                  <thead>
                    <tr>
                      <th>City</th>
                      <th>Country</th>
                      <th>Min. Daily Budget</th>
                      <th>Calculated Breakdown</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>

          <div id="view-tours" class="admin-view d-none">
            <div class="d-flex justify-content-end mb-3">
              <button class="btn btn-primary" onclick="openModal('tour')">
                <i class="bi bi-plus-lg"></i> Add Tour Package
              </button>
            </div>
            <div id="tours-grid" class="row g-4"></div>
          </div>

          <div id="view-users" class="admin-view d-none">
            <div class="card border-0 shadow-sm">
              <div class="card-header bg-white py-3">
                <h6 class="mb-0 fw-bold">Registered Users</h6>
              </div>
              <div class="table-responsive">
                <table
                  class="table table-custom align-middle mb-0"
                  id="table-users"
                >
                  <thead>
                    <tr>
                      <th>User Profile</th>
                      <th>Contact</th>
                      <th>Role</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody></tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div
      class="modal fade"
      id="cmsModal"
      data-bs-backdrop="static"
      tabindex="-1"
    >
      <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content border-0 shadow">
          <div class="modal-header bg-white border-bottom">
            <h5 class="modal-title fw-bold" id="modalTitle">Manage Item</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body p-4" id="modalBody"></div>
          <div class="modal-footer bg-light">
            <button
              type="button"
              class="btn btn-link text-muted text-decoration-none"
              data-bs-dismiss="modal"
            >
              Cancel
            </button>
            <button
              type="button"
              class="btn btn-primary px-4"
              id="btn-save-cms"
            >
              <span
                class="spinner-border spinner-border-sm d-none"
                id="save-spinner"
              ></span>
              Save Changes
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../scripts/apiConfig.js"></script>
    <script src="../scripts/admin.js"></script>
  </body>
</html>
